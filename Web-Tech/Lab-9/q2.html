<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Records</title>
</head>
<body>
    <h1>Student Management</h1>

    <h2>Add Student</h2>
    <form id="addStudentForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <br>
        <label for="age">Age:</label>
        <input type="number" id="age" name="age" required>
        <br>
        <label for="grade">Grade:</label>
        <input type="text" id="grade" name="grade" required>
        <br>
        <button type="button" onclick="addStudent()">Add Student</button>
    </form>

    <h2>Student List</h2>
    <ul id="studentList"></ul>

    <script>
    function addStudent() {
        const name = document.getElementById('name').value;
        const age = parseInt(document.getElementById('age').value);
        const grade = document.getElementById('grade').value;

        const data = {
            name,
            age,
            grade
        };

        fetch('/students', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(student => {
            const studentList = document.getElementById('studentList');
            const listItem = document.createElement('li');
            listItem.textContent = `${student.name} - Age: ${student.age}, Grade: ${student.grade}`;
            studentList.appendChild(listItem);
        })
        .catch(err => console.error(err));
    }

    function fetchStudents() {
        fetch('/students')
        .then(response => response.json())
        .then(students => {
            const studentList = document.getElementById('studentList');
            students.forEach(student => {
                const listItem = document.createElement('li');
                listItem.textContent = `${student.name} - Age: ${student.age}, Grade: ${student.grade}`;
                studentList.appendChild(listItem);
            });
        })
        .catch(err => console.error(err));
    }

    fetchStudents(); // Load students when the page loads
    </script>
</body>
</html>
